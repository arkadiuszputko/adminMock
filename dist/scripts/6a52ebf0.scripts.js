"use strict";angular.module("adminMockApp",["ngRoute","adminMockApp.faceApi","photoTaking","adminMockApp.uploadImApi"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"modules/translationTool/translate.html",controller:"TranslateCtrl"}).when("/face",{templateUrl:"modules/faceRecognition/face.html",controller:"FaceCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("adminMockApp").controller("TranslateCtrl",["$scope","$rootScope",function(a,b){a.showAll=!0,b.translation=!0,a.showAll=function(b){b.preventDefault(),a.showAll=!a.showAll},a.showNotTranslated=function(b){b.preventDefault(),a.showAll=!a.showAll},a.frazes=[{english:"Angry birds",polish:"wsciekle ptaki"},{english:"Arcade ball games",polish:""}],a.onlyNotTranslated=function(b){return a.showAll?!0:!b.polish},a.editFraze=function(a,b){b&&b.preventDefault(),a.editing=a.editing?!1:!0}}]),angular.module("adminMockApp").controller("FaceCtrl",["$scope","$rootScope","faceApi","takePhoto","uploadImApi",function(a,b,c,d,e){var f=function(b){c.get({urls:b},function(b){a.photoData=b.photos[0].tags[0].attributes})};d.init(),a.imageUrl=!1,a.taken=!1,b.translation=!1,a.takePhoto=function(){console.log("click");var b=d.captureImage();h(g(b)),a.taken=!0};var g=function(a){return a.substr("data:image/png;base64,".length)},h=function(b){e.post(b,function(b){a.imageUrl=b.url,f(b.url)})}}]),angular.module("adminMockApp.faceApi",["ngResource"]).factory("faceApi",["$resource",function(a){return a("http://api.skybiometry.com/fc/faces/detect.json?api_key=51eafd6c20444677be690c793e699cb1&api_secret=7dc0243c11d64fa48cd935c2c21de30a",{},{get:{method:"GET",params:{urls:"@urls",attributes:"all"},isArray:!1,cache:!0}})}]),angular.module("photoTaking",[]).factory("takePhoto",function(){function a(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)}function b(){navigator.myGetMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.myGetMedia({video:!0},c,d)}function c(a){f=document.getElementById("video"),f.src=window.URL?window.URL.createObjectURL(a):a,f.play()}function d(a){console.log(a)}function e(){var a=document.getElementById("canvas-image"),b=a.getContext("2d");return a.width=f.videoWidth/2,a.height=f.videoHeight/2,b.drawImage(f,0,0,a.width,a.height),g=a.toDataURL(),document.getElementById("preview").src=g,console.log("capture"),g}var f,g;return a()?{init:b,captureImage:e}:(alert("photo taking is not supported in your browser"),void 0)}),angular.module("adminMockApp.uploadImApi",["ngResource"]).factory("uploadImApi",["$resource",function(a){return a("http://lukaszl.dev.xyo.net:8080/",{},{post:{method:"POST",isArray:!1,cache:!0}})}]);